Rewriting server code in C++.

TODO:
- implement serverAction() in ParentServer
